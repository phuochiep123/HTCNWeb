<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Thế Giới Di Động</title>
    <script src="http://kit.fontawesome.com/54f0cb7e4a.js" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="../css/index.css">
    <link rel="stylesheet" href="../bootstrap-5.0.2-dist/bootstrap-5.0.2-dist/css/bootstrap.min.css">
    <script src="../bootstrap-5.0.2-dist/bootstrap-5.0.2-dist/js/bootstrap.min.js"></script>
    <script  type="text/javascript" src="../js/jquery-3.6.0.min.js"></script>
    <script src="../js/dangky.js"></script>
    <link rel="stylesheet" href="../css/thongtin.css">
    <script src="../js/thongtin.js"></script>
    <script src="../js/index.js"></script>

</head>
<script>
        var userName = localStorage.getItem('name');
        if (userName) {
            document.getElementById('hoTen').textContent = userName;
        } else {
            document.getElementById('hoTen').textContent = 'Khách';
        }

</script>
<body>

    <header>
        <img src="../img/blackFriday.gif" alt="">
    </header>
    <script>Nav();</script>

    <article>
    
        <div class="container mt-1 border" style="padding-top: 0px;">
            <div class="row" style="padding-top: 40px;">
                <div class="col-md-3 col-3">
                    <div class="menu-left">
                        <ul class="nav nav-tabs flex-column" id="myTabMenu" role="tablist">
                            <li class="nav-item" role="presentation">
                                <a class="nav-link active" id="tabTrangChu" data-bs-toggle="tab" data-bs-target="#trangChu" role="tab" aria-controls="trangChu" aria-selected="true" href="#">
                                    <box-icon style="position: relative; top: 5px;" name='home'></box-icon>
                                    Trang chủ</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="tabLichSuMuaHang" data-bs-toggle="tab" data-bs-target="#lichSu" role="tab" aria-controls="lichSu" aria-selected="false" href="#">
                                    <box-icon style="position: relative; top: 5px;" name='history'></box-icon>
                                    Lịch sử mua hàng</a>
                            </li>
                            <li class="nav-item" role="presentation">
                                <a class="nav-link" id="tabTaiKhoanCuaBan" data-bs-toggle="tab" data-bs-target="#taiKhoan" role="tab" aria-controls="taiKhoan" aria-selected="false" href="#">
                                    <box-icon style="position: relative; top: 5px;" name='user' type='solid'></box-icon>
                                    Tài khoản của bạn</a>
                            </li>
                            <li class="nav-item">
                                <a class="nav-link" id="modalLogout" data-bs-toggle="modal" data-bs-target="#logoutAcount" href="#">
                                    <box-icon style="position: relative; top: 5px;" name='log-out'></box-icon>
                                    Thoát tài khoản</a>
                            </li>
                            <div class="modal fade justify-content-center align-content-center" id="logoutAcount" tabindex="-1" aria-labelledby="ModalLogout" aria-hidden="true">
                                <div class="modal-dialog logout">
                                    <div class="modal-content">
                                        <div class="modal-body">
                                            <div class="tilte-logout" style="text-align: center;">
                                                <p style="font-size: 17px; font-weight: 600; color: black;">Bạn muốn thoát tài khoản?</p>
                                            </div>
                                            <div class="form-group logout" style="text-align: center;">
                                                <button style="font-weight: 600; width: 200px;" type="button" class="btn btn-outline-dark" data-bs-dismiss="modal">Không</button>
                                                <button onclick="dangXuat();" style="font-weight: 600;width: 200px;" type="button" class="btn btn-outline-danger">Xác nhận</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </ul>
                    </div>
                </div>
                <div class="col-md-9 col-9">
                    <div class="content-right" style="margin-left: 18px;width: 927px;">
                        <div id="trangChu" class="tab-content active">
                            <div class="infoUser">
                                <div class="welcome">
                                    <div class="welcome-avatar">
                                        <img src="../img/avatar.png" alt="" height="95">
                                    </div>
                                    <div class="welcome-content">
                                        <p style="color: #4b4848; font-size: 18px;">Xin chào</p>
                                        <p style="position: relative; top: 5px;" id="hoTen"></p>
                                    </div>
                                    <div class="welcome-info-content">
                                        <div class="ngayThamGia">
                                            <p>Ngày tham gia</p>
                                            <!-- <box-icon name='calendar-check' color='#d70018' style="height: 65px; width: 65px;"></box-icon> -->
                                            <p class="date" id="valueNgayThamGia"></p>
                                        </div>
                                        <script>
                                            // Tạo một đối tượng Date mới đại diện cho ngày hôm nay
                                            let ngay = new Date();
                                            
                                            // Lấy ngày, tháng và năm
                                            let ngay2 = ngay.getDate(); // Ngày
                                            let thang = ngay.getMonth() + 1; // Tháng (lưu ý rằng tháng bắt đầu từ 0)
                                            let nam = ngay.getFullYear(); // Năm
                                        
                                            // Định dạng lại thành chuỗi "ngày/tháng/năm"
                                            let ngayThamGia = ngay2 + "/" + thang + "/" + nam;
                                        
                                            // Gán giá trị vào phần tử có id là "valueNgayThamGia"
                                            document.getElementById("valueNgayThamGia").textContent = ngayThamGia;
                                        </script>
                                        <div class="hangThanhVien">
                                            <p>Hạng thành viên</p>
                                            <box-icon name='medal' color='#d70018' style="height: 65px; width: 65px;"></box-icon>
                                            <p id="valueHang">Thách đấu</p>
                                        </div>
                                        <div class="diemTichLuy">
                                            <p>Điểm tích lũy</p>
                                            <box-icon name='coin-stack' color='#d70018' style="height: 65px; width: 65px;"></box-icon>
                                            <p id="valueDiemTL">100</p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="trangChu-tips mt-2" style="display: flex;">
                                <div class="icon-tips me-3">
                                    <box-icon name='info-circle' type='solid' color='#106be4'></box-icon>
                                </div>
                                <div class="content-tips" style="padding-right: 170px;">
                                    <p style="font-size: 17px; position: relative; top: 6px;">Cập nhật thông tin cá nhân và địa chỉ để có trải nghiệm đặt hàng nhanh và thuận tiện hơn.</p>
                                </div>
                                <div class="button-tips">
                                    <button class="btn btn-outline-primary btn-sm" type="button">Cập nhật</button>
                                </div>
                            </div>
                            <div class="trangChu_content">
                                <div class="item-content-gift">
                                    <div class="item-content-gift-icon">
                                        <img src="../img/giftbox.png" alt="">
                                    </div>
                                    <p class="item-content-gift-title">Ưu đãi của bạn</p>
                                    <p class="item-content-gift-counter"> 0 ưu đãi</p>
                                    <a href="#" class="xemChiTiet-button">
                                        <button type="button" class="btn btn-outline-danger">Xem chi tiết</button>
                                    </a>
                                </div>
                                <div class="item-content-order">
                                    <div class="item-content-order-icon">
                                        <img src="../img/food-delivery.png" alt="">
                                    </div>
                                    <p class="item-content-order-title">Đơn hàng của bạn</p>
                                    <p class="item-content-order-counter">0 đơn hàng</p>
                                    <a href="#" class="xemChiTiet-button">
                                        <button type="button" class="btn btn-outline-danger">Xem chi tiết</button>
                                    </a>
                                </div>
                                <div class="item-content-rank">
                                    <div class="item-content-rank-icon">
                                        <img src="../img/crown.png" alt="">
                                    </div>
                                    <p class="item-content-rank-title">Hạng thành viên</p>
                                    <p class="item-content-rank-counter">Bạn đang là Thách đấu</p>
                                    <a href="#" class="xemChiTiet-button">
                                        <button type="button" class="btn btn-outline-danger">Xem chi tiết</button>
                                    </a>
                                </div>
                            </div>
                        </div>
                        <div id="lichSu" class="tab-content">
                            <div class="order-page">
                                <div class="order-content">
                                    <div class="welcome-container" style="display: flex;">
                                        <div class="welcome-avatar">
                                            <img src="../img/man.png" alt="" style="display: flex;">
                                        </div>
                                        <div class="welcome-user">
                                            <p class="hoTen" id="hoTen1" style="margin-top:20px;"></p>
                                        </div>
                                        <script>
                                            updateUser2();
                                        </script>
                                    </div>
                                    <div class="order-menu">
                                        <div class="order-menu-content">
                                            <div class="order-menu-content-donHang">
                                                <p class="content-donHang-title">0</p>
                                                <p class="content-dongHang-donViTinh">đơn hàng</p>
                                            </div>
                                            <div class="order-menu-content-diemTichLuy">
                                                <p class="content-diemTichLuy-title">0đ</p>
                                                <p class="content-diemTichLuy-text">Tổng tiền tích luỹ</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="order-container">
                                    <div class="order-container-calendar" style="display: flex; top: -30px;">
                                        <!-- <label for="from">Từ:</label>
                                        <input class="lichSu me-3" style="font-size: 20px;" type="date" name="lichSuMuaHang" id="lichSuMuaHang"> -->
                                        <div class="mb-3">
                                            <label for="" class="form-label">Từ</label>
                                            <input
                                                type="date"
                                             name=""
                                                id=""
                                                aria-describedby="helpId"
                                                placeholder=""
                                                style="border-radius: 10px; width: 150px; height: 30px; padding-left: 5px;"
                                            />
                                        </div>
                                        
                                        <div class="mb-3">
                                            <label for="" class="form-label">Đến</label>
                                            <input
                                                type="date"
                                                name=""
                                                id=""
                                                aria-describedby="helpId"
                                                placeholder=""
                                                style="border-radius: 10px; width: 150px; height: 30px; padding-left: 5px;"
                                            />
                                        </div>
                                    </div>
                                    <ul class="nav nav-tabs justify-content-center">
                                        <li class="nav-item">
                                            <a class="btn active" data-bs-toggle="tab" href="#allTab" role="tab" >Tất cả</a>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <a class="btn" data-bs-toggle="tab" href="#choXacNhan" role="tab">Chờ xác nhận</a>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <a class="btn" data-bs-toggle="tab" href="#daXacNhan" role="tab" >Đã xác nhận</a>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <a class="btn" data-bs-toggle="tab" href="#dangVanChuyen" role="tab">Đang vận chuyển</a>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <a class="btn" data-bs-toggle="tab" href="#daGiaoHang" role="tab">Đã giao hàng</a>
                                        </li>
                                        <li class="nav-item" role="presentation">
                                            <a class="btn" data-bs-toggle="tab" href="#daHuy" role="tab">Đã huỷ</a>
                                        </li>
                                        <div class="tab-pane fade show active" id="allTab" role="tabpanel">
                                            <table class="table">
                                                <thead>
                                                    <tr>
                                                        <th>STT</th>
                                                        <th>Tên sản phẩm</th>
                                                        <th>Phiên bản</th>
                                                        <th>Số lượng</th>
                                                        <th>Thành tiền</th>
                                                        <th>Trạng thái</th>
                                                    </tr>
                                                </thead>
                                                <tbody id="cartItems">
                                                </tbody>
                                            </table>
                                        </div>
                                    </div>
                             
                            </div>
                        </div>
                        <div id="taiKhoan" class="tab-content">
                            <div style="display: flex;">
                                <div class="profile-info me-5" style="width: 450px;">
                                    <h2>Cập nhật thông tin cá nhân</h2>
                                    <div class="info-item">
                                        <label for="hoTen">Họ và tên:</label>
                                        <input type="text" id="hoTen2">
                                    </div>
                                    <div class="info-item">
                                        <label for="email">Email:</label>
                                        <input type="text" id="email" >
                                    </div>
                                    <div class="info-item">
                                        <label for="gioiTinh">Giới tính:</label>
                                        <select id="gioiTinhs" class="form-select form-select-sm" aria-label="Small select example">
                                            <option selected>Chọn giới tính</option>
                                            <option value="Nam">Nam</option>
                                            <option value="Nữ">Nữ</option>
                                            <option value="Khác">Khác</option>
                                          </select>
                                    </div>
                                    <div class="info-item">
                                        <label for="sdt">Số điện thoại:</label>
                                        <input type="text" id="sdt" >
                                    </div>
                                    <div class="info-item">
                                        <label for="sinhNhat">Sinh nhật:</label>
                                        <input type="date" id="sinhNhat">
                                    </div>
                                    <div class="info-item">
                                        <label for="ngayThamGia">Ngày tham gia:</label>
                                        <input type="text" id="ngayThamGia" >
                                    </div>
                                    <div class="info-item">
                                        <label for="diaChi">Địa chỉ:</label>
                                        <input type="text" id="diaChi">
                                    </div>
                                    <div class="info-item" style="display: flex;">
                                        <button class="btn btn-outline-dark" id="btnCapNhat" onclick="capnhat()">Cập nhật</button>
                                    </div>

                                </div>
                                <script>
                                    updatePersonalInfo();
                                </script>
                                <div id="updatedInfo">
                                    <h2>Thông tin cá nhân</h2>
                                    <div class="profile-info">
                                        <div class="info-item" style="display: flex;">
                                            <label class="me-2" for="hoTen">Họ và tên:</label>
                                            <p id="hoTen3"></p>
                                        </div>
                                        <div class="info-item" style="display: flex;">
                                            <label class="me-2" for="email">Email:</label>
                                            <p id="email1"></p>
                                        </div>
                                        <div class="info-item" style="display: flex;">
                                            <label class="me-2" for="gioiTinh">Giới tính:</label>
                                            <p id="gioiTinh1"></p>
                                        </div>
                                        <div class="info-item" style="display: flex;">
                                            <label class="me-2" for="sdt">Số điện thoại:</label>
                                            <p id="sdt1"></p>
                                        </div>
                                        <div class="info-item" style="display: flex;">
                                            <label class="me-2" for="sinhNhat">Sinh nhật:</label>
                                            <p id="sinhNhat1"></p>
                                        </div>
                                        <div class="info-item" style="display: flex;">
                                            <label class="me-2" for="ngayThamGia">Ngày tham gia:</label>
                                            <p id="ngayThamGia1"></p>
                                        </div>
                                        <div class="info-item" style="display: flex;">
                                            <label class="me-2" for="diaChi">Địa chỉ:</label>
                                            <p id="diaChi1"></p>
                                        </div>
                                    </div>

                                </div>
                                <script>
                                    function updatePersonalInfo() {
                                        // Lấy thông tin từ các trường input
                                        var hoTen = document.getElementById('hoTen2').value;
                                        var gioiTinh = document.getElementById('gioiTinhs').value;
                                        var email = document.getElementById('email').value;
                                        var sdt = document.getElementById('sdt').value;
                                        var sinhNhat = document.getElementById('sinhNhat').value;
                                        var ngayThamGia = document.getElementById('ngayThamGia').value;
                                        var diaChi = document.getElementById('diaChi').value;

                                        // Hiển thị thông tin cá nhân trong phần tử updatedInfo
                                        document.getElementById('hoTen3').innerText = hoTen;
                                        document.getElementById('hoTen').innerText= hoTen;
                                        document.getElementById('email1').innerText = email;
                                        document.getElementById('gioiTinh1').innerText = gioiTinh;
                                        document.getElementById('sdt1').innerText = sdt;
                                        document.getElementById('sinhNhat1').innerText = sinhNhat;
                                        document.getElementById('ngayThamGia1').innerText = ngayThamGia;
                                        document.getElementById('diaChi1').innerText = diaChi;

                                        // Lưu thông tin vào localStorage
                                        localStorage.setItem('hoTen', hoTen);
                                        localStorage.setItem('gioiTinh', gioiTinh);
                                        localStorage.setItem('sdt', sdt);
                                        localStorage.setItem('sinhNhat', sinhNhat);
                                        localStorage.setItem('diaChi', diaChi);
                                        localStorage.setItem('ngayThamGia', ngayThamGia);
                                        localStorage.setItem('email', email);
                                    }

                                    // Xử lý sự kiện khi nút "Cập nhật" được nhấn
                                    document.getElementById("btnCapNhat").addEventListener("click", function() {
                                        updatePersonalInfo();
                                    });
                                </script>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

</article>


<!-- Modal Dịa điểm -->
    <div class="modal" id="diadiem">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header" style="background-color: rgb(47,128,237);">
                    <p style="margin-top: 5px;">Mời bạn chọn địa chỉ <span id="diadiemchon">...</span></p>
                    <button data-bs-dismiss="modal" class="btn btn-blue text-white" style="border: 1px solid lightblue;">Đóng</button>

                </div>
                <div class="modal-body text-dark">
                    <div class="modal-bodydd">
                        <div class="row ">
                            <div class="col-5" >
                                <p><a href="#" id="q1" class="loc">Quận 1</a></p>
                            </div>
                            <div class="col-5" >
                                <p><a href="#" id="q3" class="loc">Quận 3</a></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-5" id="q4">
                                <p><a href="#" class="loc">Quận 4</a></p>
                            </div>
                            <div class="col-5" id="q5">
                                <p><a href="#" class="loc">Quận 5</a></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-5" id="q6">
                                <p><a href="#" class="loc">Quận 6</a></p>
                            </div>
                            <div class="col-5" id="q7">
                                <p><a href="#" class="loc">Quận 7</a></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-5" id="q8">
                                <p><a href="#" class="loc">Quận 8</a></p>
                            </div>
                            <div class="col-5" id="q10">
                                <p><a href="#" class="loc">Quận 10</a></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-5" id="q11">
                                <p><a href="#" class="loc">Quận 11</a></p>
                            </div>
                            <div class="col-5" id="q12">
                                <p><a href="#" class="loc">Quận 12</a></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-5" id="qbt">
                                <p><a href="#" class="loc">Quận Bình Tân</a></p>
                            </div>
                            <div class="col-5" id="abth">
                                <p><a href="#" class="loc">Quận Bình Thạnh</a></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-5" id="qgv">
                                <p><a href="#" class="loc">Quận Gò Vấp</a></p>
                            </div>
                            <div class="col-5" id="qpn">
                                <p><a href="#" class="loc">Quận Phú Nhuận</a></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-5" id="qtb">
                                <p><a href="#" class="loc">Quận Tân Bình</a></p>
                            </div>
                            <div class="col-5" id="qtp">
                                <p><a href="#" class="loc">Quận Tân Phú</a></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-5" id="qbc">
                                <p><a href="#" class="loc">Huyện Bình Chánh</a></p>
                            </div>
                            <div class="col-5" id="hcg">
                                <p><a href="#" class="loc">Huyện Cần Giờ</a></p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-5" id="hcc">
                                <p><a href="#" class="loc">Huyện Củ Chi</a></p>
                            </div>
                            <div class="col-5" id="hhm">
                                <p><a href="#" class="loc">Huyện Hóc Môn</a> </p>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-5" id="hnb">
                                <p><a href="#" class="loc">Huyện Nhà Bè</a></p>
                            </div>
                            <div class="col-5" >
                                <p><a href="#" id="tptd" class="loc">TP.Thủ Đức</a></p>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>

    </div>


    <script>
        let modalLink= document.getElementsByClassName("loc");
        for(let i=0; i<modalLink.length;i++){
            modalLink[i].addEventListener("click", function(envet){
                let linkvalue=this.textContent;
                document.getElementById("Diemmuadt").textContent=linkvalue;
                $('#diadiem').modal('hide');
            });   
        }

        function dangXuat(){
            alert("Đăng xuất thành công!");
            localStorage.setItem("loginStus", "false");
            window.open("../html/index.html");
        }
        let stt =1;
        $(document).ready(function() {
            let cartItems = JSON.parse(localStorage.getItem("listchoxuli"));

            // lấy danh sách
            if (cartItems && cartItems.length > 0) {
                cartItems.forEach(function(product) {
                    let row = "<tr><td>" + stt++ + "</td><td>" + product.tensanpham + "</td><td>4GB/128GB</td><td><input type='number' value='1' disabled></td><td>" + product.gia + "đ</td><td>" + "Chờ xác nhận" + "</td></tr>";
                    $("#cartItems").append(row);
                });
            }

        });
    </script>

</body>
</html>